{"./":{"url":"./","title":"Introduction","keywords":"","body":"READ ME © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/1-Cisco區域網路交換器.html":{"url":"md/1-Cisco區域網路交換器.html","title":"Cisco區域網路交換器","keywords":"","body":"Cisco區域網路交換器 tagsstart CCNA Network Cisco 通訊 Protocol 證照 tagsstop 名詞定義 Hub、橋接器、Switch © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/2-Server.html":{"url":"md/2-Server.html","title":"Server","keywords":"","body":"Type tagsstart Server 軟體 tagsstop Type Project Code: gitlab IM: mattermost Log : Sentry Config: Ansible Image: Docker register & Portus Space: owncloud User: openLDAD LoadBlance: Nginx,HAProxy,LVS mail: postfix,dovecot Project:Readmine Table:PowerBI VM:AWS,Azure © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/3-SIP.html":{"url":"md/3-SIP.html","title":"SIP","keywords":"","body":"SIP 摘要 SIP已經成為VoIP的主要通訊協定 為了和現有的PSTN公眾網路 銜接而制定的SIP延伸協定：SIP-T、SIP-I SIP 的一個重要應用，IMS多媒體子系統 定位 SIP(Session Initiation Protocol)通訊協定主要是作為一個或多個使用 者在網路上建立、修改、維護和終止會談的通訊使用。是屬於應用層 (application layer)的一種通訊協定 VoIP的服務裡，至少須包含兩個部分的通訊協定， 第一個部分是 呼叫控制協定 - 最主流的就屬H.323和SIP 但由於H.323過於複雜 協定中的命令與訊息都是由二進位碼所組成 實行(implement)起來非常困難 使得相對較為簡易、開放的 SIP協定得以受到越來越多的重視 另一個是媒體傳輸協定(包含媒體控制和及時傳輸控制) 特點 簡單：SIP的通訊模式與 HTTP通訊協定的類似，採用請求(request)/回應(response)的模 式，提供數種的要求命令(command)和回應代碼(status code)，並配合夾帶檔頭欄位(header fields)訊息和通訊內容 (content)，來完成呼叫控制。 以文字為主：類似HTTP的作法， 將協定的訊息以文字 (Text)表達並使用標準的字元編碼，如ASC-II或UTF-8。使用文 字模式有幾種好處，首先是容易實作，特別是容易進行偵 錯(debug)；再者是擴充性較佳，增 加額外的訊息不需要大幅更動原有的解析程式。 與傳輸層分離：SIP在傳輸層之上運作， 可以提升網路傳輸的適應性和支援性，例如在封包漏失較為嚴重 的網路環境中使用TCP連線，而在較好的環境中就使用UDP。 支援移動性：SIP在制定時，就將支援移動性 納入考量，使得無 論在呼叫階段或是交談過程中，都可以藉由轉送或是重新邀請 (re-invite)的方式來維繫會談session。 較早被運用於VoIP 的通訊協定是H.323，但H.323 並非為了VoIP而設計的，因此在支援VoIP有許多缺陷。 反觀 SIP 卻是專為VoIP而設計的，因此比SIP 有許多顯著的優點。 架構 最主要的任務在於建立、維繫及管理會談(session) 建立會談的第一步是要找到受話者的位址，然後呼叫受話者， 受話者同意建立會談後再交換建立會談的一些重要約定訊息 協商之後便開是建立會談，讓雙方自行傳輸語音封包， 然後再繼續管控會談過程，直到通話結束為止。 這些功能可以各自存在於不同的硬體設備，也可能 數個功能共存於同一硬體設備上。 四種基本的元件，包括： User Agent ：簡稱UA，負責為CPE(終端設備)提供服務， 又可細分為用戶端User Agent Client(UAC)和User Agent Server(UAS)， UAC 負責提出請求，UAS負責回應訊息。每一個SIP UA都可以扮演UAC 或UAS，服務呼叫者(Caller)的UA，執行UAC 的角色；反之，服務 被呼叫(Callee)的UA則是 UAS。 Proxy Server： 代理伺服器是SIP運作時的中心，Proxy Server會將 呼叫者的請求轉送到另外一端，所以它同時會扮演UAC和UAS。 Redirect Server： Redirect Server用來實現邏輯位址和實體位址的分離， 每個使用者擁有一個固定不變的邏輯位址，但實體位址可以隨意 變動，每當使用者移動時，必須由UA 負責向一個Redirect Server 註冊，所以他人可以以被呼叫者的邏輯位址詢問Redirect Server獲知 被呼叫者的實際位址。Redirect Server 可以用來實現 Call Forward 這類功能。 經由Redirect Server的運作，被呼叫端 實際的位址可以在建立會談時被告知給呼叫端，與Proxy Server不同 的是，Redirect Server不會轉送任何SIP訊息。 Registrar Sever： 登錄伺服器，其目的為紀錄或更新用戶位址及狀 態。當User Agent上線時，會先執行SIP的REGISTER命令，用以 將目前UA的位址及狀態紀錄或更新，當有呼叫者提出會談的請求 時，相關的其他元件就能順利的找到被呼叫端。每次UA登錄時都有 一定的期限，UA必須在期限內重新註冊，否則相關的會期(Session) 狀態，就無法維護，此設計讓SIP具有支援移動性的能力。 其他一些伺服器像是Location Server和Media Gateway等，雖 然這些伺服器都不會處理跟SIP的訊息，但通常一個SIP的系統都會 需要用到這些伺服器，才能建立完整的通話。 語法 SIP的語法是以BNF規則所定義的，該語法規則非常類似HTTP的 通訊協定，最基本的單位為SIP Message，Message是由三部分所組 成：起始行(Start Line)、訊息表頭(Message Header)、訊息本體 (Message Body)。而Message又分兩種：請求(Request)和回應 (Response) Start Line： 以Request的訊息而言，在Start Line行以一個大寫的 英文單字開頭，代表不同的功能，如INVITE、ACK、BYE、CANCEL、 REGISTER、INFO和OPTION 等方法。 Response訊息則在Start Line 以一個三位數的十進位回應碼 (Status Code) 開頭代表不同的回應 訊息，如1XX 表示一些進行中狀態的說明(Provisional)；2XX 表示 成功；3XX 表示轉向(Redirect)的狀況；4XX表示請求端的錯誤 (Client-Error)；5XX表示服務端的錯誤(Server-Error)；6XX表示一些 全域性的錯誤(Global-Error)。 Message Header： 主要是用來說明Request和Response訊息的詳細資料。 Message Body： 則主要是傳遞會談描述協定(SDP)的訊息。 SIP在每次的會談中稱作交談(Dialog)。在Dialog中可能會包含 許多訊息交易(Transaction)，所謂的Transaction就是由請求端發出 請求命令到另一端回應的訊息被接收完畢為止。每個Transaction都 會有個序號ID，用來辨識每個交易的順序及回應關係。 除了語法與物件的定義外，SIP也描述了幾種建立呼叫的模型，包 括只包含兩個UA參與的直接呼叫(Direct Call)；和經過Proxy Server 的代理呼叫(Proxy Call)、多重代理呼叫；透過Redirect Server的重 定向呼叫(Redirect Call)。另外還有透過第三方的呼叫控制(3rd Party Call Control, 3PCC)，來完成像是REFER、CONFERENCE等應用。 另外還有一些進階的功能，如一號多機、一機多號、請勿打擾(Do Not Disturb)、自動轉接(Call Forward)、自動回撥、呼叫保留和話中插接 等功能不一而足。 其他與SIP協定相關的網路協定 SDP： 會談描述協定。此協定主要是用來協商雙方建立多媒體資料封 包通道(Traffic channel)之用。雙方會在邀請(Invite)訊息的三向交握 (hand-shake)過程中交換彼此可以使用的通訊方式及資料格式。 RTP： 即時傳輸協定。用於及時的資料傳遞，如語音影像資料。由於 VoIP所傳輸的多媒體資料大多及時性優先於資料的完整性，所以利 用RTP的特性來編排、補償及傳遞這些資料內容，最為合適。 LDAP： 輕量級目錄訪問協定。此協議主要是讓SIP server用來與位 址服務的伺服器(Location Server)溝通，已取得某個查詢目的的正確 位置。 改良 SIP-T 為了讓VoIP的服務擴展，VoIP網路與現有網路(如公眾交換網路PSTN) 的互通性便為一個重要的議題。作為VoIP裡主要的通訊協定SIP，當然 有必要加以延伸，以作為和其他網路連接的工具。SIP-T (SIP for Telephone)便是在此需求下而產生，被定義於IETF 3372。此協定當初由 IETF小組制定的原因是因為該小組是和制定SIP協定的同一組人，對SIP 的了解最深入，由他們來制定最合適不過，而且若是在制定過程中發現 SIP的不足時，還可以去修改原來SIP的協定。 SIP-T的目的是在於提供PSTN與IP網路之間，訊號轉譯與互相運作 的一套機制，使得從兩端服務都能夠透通地彼此連接。在SIP-T協定中定 義了三種連接的方式，分別為 SIP Bridging： 就是由PSTN的用戶發起(origination)，中間經過以SIP 作協定的VoIP網路，再由PSTN網路終結(termination)。 (Phone-to-Phone)。 PSTN origination ： IP termination: 就是由PSTN的用戶發起，由IP網 路的SIP用戶終結。 (例如: Phone-to-PC VoIP) IP origination ： PSTN termination: 就是由IP網路的SIP用戶發起， 由PSTN的用戶終結。 (例如: PC-to-Phone VoIP) SIP-I SIP-I又稱為SIP with encapsulated ISUP，此協定是由ITU-T的工 作小組(ITU-TSG11)所制定，其內容包含Technical report TRQ.2815和 Recommendation Q.1912.5標準草案。其中TRQ.2815主要是定義SIP 和Bearer Independent Call Control(BICC) 協議或ISUP協議之間的 互通技術需求、互通介面模型、互通單元(Interworking Unit, IWU)所應支 援的能力等等。Q.1912.5則定義了SIP和BICC/ISUP的互通機制、訊息 的對應及封裝，將這些功能完整地定義於互通單元裡(IWU)。所謂的互通 單元就是執行各種介面節點之間的訊息交換，轉交或遞送訊息到SIP網 路。在不同的網路之間的稱作Network-to-Network Interface(NNI)，這 些介面都需要IWU來作為橋梁。 SIP-T 與SIP-I之間的比較 相較於SIP-I豐富的內容，SIP-T只有定義一些基本通訊功能的介面轉 換，可以說相對的實用性低了很多。這些以互聯網起家的IETF技術人員 所制定的標準，終究不比以傳統通訊本家的組織人員(ITU-T)鎖定義的標 準。SIP-I協定不但沿用了許多IETF的標準，還在基本的呼叫服務之外， 制定包括CLIP、CLIR等附屬業務間的互通；除了呼叫信令的互通，還考 慮了資源預留、品質確保、媒體資訊轉換、與PSTN/3GPP等完整互通的 問題。而且SIP-I所制定的協議，也比較清晰嚴謹，沒有像IETF許多協議 較為彈性卻相對模糊的特性。這些因素使得目前以SIP-I較廣為各家營運 商、電信商所接受，漸漸成為整合其他網路的核心協定。 IMS IMS（IP Multimedia Subsystem; IP多媒體子系統） 可以連結無線、有線與有線電視寬頻服務的各種裝置，IMS解決方案為重視存取（access-aware），並支援 3GPP（IMS）、3GPP2（MMD）、Packet Cable 2.0與TISPAN標準。目前有線網路、有線電視寬頻服務、CDMA及GSM/UMTS市場領導廠商都在進行IMS測試。 IMS整合服務網路建立於 SIP多媒體、網路電話（Voice over IP；VoIP）及無線通訊之基礎。以IMS為基礎的服務包括影像電話、視訊會議、即時訊息與多媒體服務等，且僅需透過一項設備與一個電話號碼即可進行。 此一解決方案協助服務供應商更有效率地整合多重網路上的用戶資訊，並可將用戶各項費用列於單一帳單上。 在同一域中建立 SIP协议 会话 　　下图说明了在预订同一个 ISP 从而使用同一域的两个用户之间建立 SIP协议 会话的过程。用户 A 使用 SIP协议 电话。用户 B 有一台 PC，运行支持语音和视频的软客户程序。加电后，两个用户都在 ISP 网络中的 SIP协议 代理服务器上注册了他们的空闲情况和 IP 地址。用户 A 发起此呼叫，告诉 SIP协议 代理服务器要联系用户 B。然后，SIP协议 代理服务器向 SIP协议 注册服务器发出请求，要求提供用户 B 的 IP 地址，并收到用户 B 的 IP 地址。SIP协议 代理服务器转发用户 A 与用户 B 进行通信的邀请信息（使用 SDP），包括用户 A 要使用的媒体。用户 B 通知 SIP协议 代理服务器可以接受用户 A 的邀请，且已做好接收消息的准备。SIP协议 代理服务器将此消息传达给用户 A，从而建立 SIP协议 会话。然后，用户创建一个点到点 RTP 连接，实现用户间的交互通信。 1.呼叫用户 B 2.查询B在哪里 3.响应B的SIP协议地址 4.呼叫 响应 响应 多媒体通道已建立 在不同的域中建立 SIP协议 会话 　　本情景与第一种情景的不同之处如下。用户 A 邀请正在使用多媒体手持设备的用户 B 进行 SIP协议 会话时，域 A 中的 SIP协议 代理服务器辨别出用户 B 不在同一域中。然后，SIP协议 代理服务器在 SIP协议 重定向服务器上查询用户 B 的 IP 地址。SIP协议 重定向服务器既可在域 A 中，也可在域 B 中，也可既在域 A 中又在域 B 中。SIP协议 重定向服务器将用户 B 的联系信息反馈给 SIP协议 代理服务器，该服务器再将 SIP协议 会话邀请信息转发给域 B 中的 SIP协议 代理服务器。域 B 中的 SIP协议 代理服务器将用户 A 的邀请信息发送给用户 B。用户 B 再沿邀请信息经由的同一路径转发接受邀请的信息。 Image 1 - 2 SIP最强大之处就是用户定位功能。SIP本身含有向注册服务器注册的功能，也可以利用 其它定位服务器DNS、LDAP等提供的定位服务来增强其定位功能。 　#SIP共规定了六种信令 INVITE、ACK、CANCEL、OPTIONS、BYE、REGISTER INVITE和 ACK用于建立呼叫，完成三次握手，或者用于建立以后改变会话属性； BYE用以结束会话； OPTIONS 于查询服务器能力； CANCEL用于取消已经发出但未最终结束的请求； REGISTER用于客户出向注册服 务器注册用户位置等消息。 SIP协议支持三种呼叫方式：由用户代理服务机（UAC）向用户代理服务器（UAS）直接呼叫， 由UAC在重定向服务器的辅助下进行重定向呼叫和由代理服务器代表UAC向被叫发起呼叫。通过 SIP代理建立呼叫的例子 Image 2 - 3 可通過以下過程建立兩個電話之間的SIP通話： Image 3 - 4 撥打方電話發送邀請 接收方電話返回一個通知應答100–正在嘗試 接收方電話發出並送回應答180–正在撥打 當撥打方拿起電話，接收方電話發出應答200–OK 撥打方電話回以確認應答，以告知對方 當通過RTP傳輸資料時，就可以通話了 當撥打方挂上電話後，會向接收方電話發出一個再見呼叫 撥打方電話會回以應答200–OK 就這麽簡單！SIP協定邏輯性強，容易理解。 RFC 3261 SIP 是一個應用層的控制協議,可以用來建立、修改、和終止多媒體會話(或者會議)例如 Internet 電話。 用戶定位: 檢查終端使用者的位置,用於通訊。 用戶有效性:檢查用戶參與會話的意願程度。 用戶能力:檢查媒體和媒體的參數。 建立會話:”ringing”,建立會話參數在呼叫方和被叫方。 會話管理:包括發送和終止會話,修改會話參數,啟動服務等等。 SIP 不是一個垂直集成的通訊系統。SIP 可能叫做是一個部件更合適,它可以用作其他 IETF 協定的一個部分,用來構造完整的多媒體架構。 比如,這些架構將會包含即時資料傳輸協議(RTP)(RFC 1889)用來傳輸即時的資料並且提供QoS 回饋, 即時資料流通訊協定(RSTP)(RFC 2326)用於控制流媒體的的傳輸, 媒體閘道控制協議(MEGACO)(RFC 3015)用來控制到公共電話交換網(PSTN)的閘道, 還有工作階段描述通訊協定(SDP)(RFC 2327)用於描述多媒體會話。 因此,SIP 應該和其他的協議一起工作,才能提供完整的對終端使用者的服務。 SIP 並不提供會議控制服務(比如議席控制或者投票系統),並且並沒有建議會議應該怎樣管理。 可以通過在 SIP 上建立其他的會議控制協議來發起一個會議。 SIP 可以基於 IPV4 也可以基於 IPV6 Image 4 - 5 Alice 通過 Bob 的 SIP 標誌 “呼叫” Bob, 這個 SIP 標誌是統一分配的資源(Uniform Resource Identifier URI)稱作 SIP URI。 SIP URI它很像一個 email 位址,典型的 SIP URI 包括一個用戶名和一個主機名 稱。在這個範例中,SIP URI 是 sip:bob@biloxi.com biloxi.com 是 Bob 的SIP 服務提供者。 Alice 有一個 SIP URI: sip:alice@atlanta.com。 SIP 也提供保密 URI,稱作 SIPS URI。 例如:sips: bob@biloxi.com。一個基於 SIPS URI 的通話保證這個通話是安全的,並且對呼叫者和被叫的所有的 SIP 消息是加密傳輸的(叫做 TLS)。 在 TLS 中,請求是通過加密方式傳輸給被叫方,但是這個加密機制是基於被叫方宿主要伺服器的實現的。 INVITE sip:bob@biloxi.com SIP/2.0 Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bK776asdhds Max-Forwards: 70 To: Bob sip:bob@biloxi.com From: Alice sip:alice@atlanta.com;tag=1928301774 Call-ID: a84b4c76e66710@pc33.atlanta.com CSeq: 314159 INVITE Contact: sip:alice@pc33.atlanta.com Content-Type: application/sdp 13 Content-Length: 142 (Alice’s SDP not shown) 在文本消息的第一行,包含了請求的類型(INVITE)。在這行之後的是這個請求的頭域。這個例子中包含了最少需要的頭域集合。簡單介紹一下: VIA 域包含了 Alice 接收發送請求的伺服器位址(pc33.atlanta.com)。同樣這個包含了一個分支參數來標誌 Alice 和這個伺服器的會話事務。 這個 TAG 參數是一個隨機字串(1928301774),是softphone在 URI 上增加的一個隨機串。用來做標誌用途的。 Call_ID包含一個全域的唯一標誌,用來唯一標誌這個呼叫,通過隨機字串和softphone的自己名字或者 IP 抵制混和產生的。 通過 TO TAG, FROM TAG 和CALL-ID 完整定義了 Alice 和 Bob 之間的端到端的 SIP 關係,並且表示這個是一個對話性質的關係。 CSEQ 或者 Command Sequence 包含了一個整數和一個請求名字。 這個 Cseq數位是順序遞增的。每當對話中發起一個新的請求都會引起這個數位的順序遞增。 Contact 域包含一個 SIP 或者 SIPS URI 用來表示訪問 Alice 的直接方式,通常由用戶名和一個主機的全名(Fully Qualified Domain Name FQDN)組成。 當FQDN 作為首選的時候,許多終端使用者由於不會由名字登記(而導致不能訪問Alice 的主機),所以 IP 位址是可選的。 Max-Forwards:最大轉發數量限制了通訊中轉發的數量。它是由一個整數組成,每轉發一次,整數減一。 Content-type 包含了訊息文字的描述(訊息文字在本範例中沒有列出) Content-length:包含訊息文字的長度(位元組數) 由於 softphone 並不知道 bob 或者 bob 的 sip 伺服器 biloxi.com 在哪裡, 所以softphone 發送 INVITE 請求到 Alice 的 sip 伺服器,atlanta.com。 這個atlanta.com SIP 伺服器應該已經在 Alice 的 softphone 中配置了,或者可以通過 DHCP 獲得。 atlanta.com SIP 伺服器是一台代理伺服器。 代理伺服器接收SIP 請求並且根據請求轉發。 在這個例子中,代理伺服器接收到 INVITE 請求,並且回送一個 100(Trying)應答給 Alice 的 softphone。 100(Trying)應答表示 INVITE 請求已經收到,並且代理伺服器正在轉發 INVITE 請求。 SIP 的應答是通過一個三位元數的數字表示的。SIP 應答同樣包含 TO、FROM、Call-ID,CSEQ 和在 VIA 中的分支參數,這個參數使得 Alice 的 softphone 可以把請求和應答關聯起來。 atlanta.com 代理伺服器收到 INVITE 請求之後,就去找biloxi.com 可能通過 DNS 服務來找提供這個 biloxi.com 的 SIP 伺服器。最後,轉發 INVITE 請求到 biloxi.com 或者能到達 biloxi.com 的代理伺服器。 在轉發請求之前,atlanta.com 代理伺服器會在 via 頭上增加一個一段包含自己抵制的值 (INVITE 已經包含了 Alice 的的地址 VIA 域) 當 Alice 的 softphone 收到 180(Ringing)應答的時候,它提示 Alice,可能是通過一個回鈴音,或者螢幕上的一個消息提示。 在這個例子中,Bob 決定回應這個呼叫。當他拿起電話,他的 SIP 電話發送 200(OK)回應給發送者,表示這個電話已經接起來了。 這個 200(OK)包含了一個消息體,這個消息體包含 SDP 媒體描述,這個媒體描述包含 Bob 希望和 Alice建立何種媒體連接。 同樣,SDP 消息也是兩段交換:Alice 發送一個給 Bob,Bob發送一個回給 Alice。這個兩段的交換提供基本的相容性協商,並且基於簡單的SDP 提出/應答交換模型。 如果 Bob 不想響應這個呼叫或者正在響應別的呼叫,一個錯誤的響應會代替正常的 200(OK)回送出去,這樣,就不會有連接建立。 Bob 發出的 200(OK)(圖一的 F9 消息)可能長得像這樣的: SIP/2.0 200 OK Via: SIP/2.0/UDP server10.biloxi.com ;branch=z9hG4bKnashds8;received=192.0.2.3 Via: SIP/2.0/UDP bigbox3.site3.atlanta.com ;branch=z9hG4bK77ef4c2312983.1;received=192.0.2.2 Via: SIP/2.0/UDP pc33.atlanta.com ;branch=z9hG4bK776asdhds ;received=192.0.2.1 To: Bob sip:bob@biloxi.com;tag=a6c85cf From: Alice sip:alice@atlanta.com;tag=1928301774 Call-ID: a84b4c76e66710@pc33.atlanta.com CSeq: 314159 INVITE Contact: sip:bob@192.0.2.4 Content-Type: application/sdp Content-Length: 131 (Bob’s SDP not shown) (有三個 VIA 域值-一個是 Alice SIP 電話增加的,一個是 atlanta.com 代理加 的,一個是 biloxi.com 代理加的)。 Bob 的 SIP 電話增加了一個 TAG 參數。這個 TAG 參數會被參與對話的各方所使用,並且在以後的對話中被使用。Contract 域包含了一個能直接聯繫到 Bob 的 URI。 Content-type 和 Content_Length域包含了消息體(沒有在例子中體現),這個消息體裡邊是 Bob 的 SDP 媒體資訊。 # 除了 DNS 和位置服務之外,代理伺服器可以自主決定路由,也就是說自己決定應 該向哪裡轉發請求。 比如,如果 Bob 的 SIP 電話返回一個 486(電話正忙)信號,biloxi.com 這個代理伺服器可以轉發這個 INVITE 請求到 Bob的語音郵箱伺服器。 一個代理伺服器可以同時向 N 個地方發送 INVITE 請求。這種併發尋找就是傳說中的分流(forking)。 在通話結束的時候,Bob 首先斷開(掛機 hangs up),並且發送一個 BYE 的消息。 這個 BYE 的消息將直接送到 Alice 的 softphone,同樣是跳過代理的。 Alice通過發送 200(OK)應答來確認收到了這個 BYE 消息,這個消息終止了會話並且應答了 BYE 的請求。 ACK 在這裡不需要發送-一個 ACK 信號只在響應一個INVITE 的響應的時候被發送。 登記服務 登記服務是另一個常用的 SIP 操作。 登記服務是 biloxi.com 代理伺服器知道 Bob當前位址的一個方法。 在初始化的時候,或者每隔一段時間,Bob 的 SIP 電話發送 REGISTER 消息給 biloxi.com 的一個註冊伺服器。 REGISTER 消息包含了 Bob 當前登陸伺服器的 SIP 或者 SIPS 的 URI(sip:bob@biloxi.com)(轉換成為 Contact 域中的 SIP 或者 SIPS URI)。 登記伺服器登記這個映射,這個叫做綁定(binding), 寫到一個資料庫裡邊,叫做定位服務(location service),這個資料庫可以被 biloxi.com 的代理伺服器使用。 通常登記伺服器和代理伺服器是做在一起的。 一個很重要的概念就是 SIP 伺服器的差別在邏輯上,並非在物理上的差別。 Bob 並沒有限定非得在一個單個設備上發起註冊。 比如,他家裡的 SIP 電話和公司的 SIP 電話都可以註冊。 這些消息在定位服務(location service)中保存,並且允許代理伺服器通過不同的手段查找 Bob。 同樣的,不同的用戶也可以在同一個設備上同時註冊。 定位服務(location service)是一個邏輯概念。 他是讓代理服務通過輸入一個URI 來查詢到底應該向哪裡轉發請求。 最後在 SIP 中需要注意的是,註冊服務只是用來提供路由收到的 SIP 請求的,它並不做請求的身份認證的判定。 Image 5 - 6 © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/4-RTP體系.html":{"url":"md/4-RTP體系.html","title":"RTP體系","keywords":"","body":"RTP、RTCP、RTSP tagsstart RTP RTCP RTSP Protocol tagsstop Introduction RTCP：應用層協定，同Http RTSP：應用RTP & RTCP協定的Framework 分為RTSP server & RTSP client © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/5-CCNP/1-TCP_IP與OSI網路模型.html":{"url":"md/5-CCNP/1-TCP_IP與OSI網路模型.html","title":"TCP_IP與OSI網路模型","keywords":"","body":"TCP/IP與OSI網路模型 tagsstart CCNA Network Cisco 通訊 Protocol 證照 tagsstop 名詞定義 中文 英文 全稱 SOHO small office home office 數位用戶線路 DSL digital subscriber line 國際標準組織 ISO International Organization for Standardization 開放系統互連 OSI Open System Interconnection 美國國防部 DoD 開放系統互連 OSI Open System Interconnection 傳輸控制協定 TCP Transmission Control Protocol 使用者資料包協定 UDP User Datagram Protocol 資料段 segment 封包 packet 訊框 frame 協定資料單元 PDU Protocol Data Unit 歷史 對外連線是透過乙太網路連到DSL或Cable數據機 DSL再透過同軸電纜接到有線電視的插座 同軸電纜跟有線電視是同一種纜線 建置網路模型需要藍圖，如同建築工程師 於是各家企業開始提出自己的藍圖 Image 1 - 1-1 TCP/IP未紅以前，購買不同廠商的電腦，就要建置不同的網路模型 後來ISO制定了OSI模型 DoD也制定了TCP/IP模型，而且贏了 概觀 TCP/IP 採用RFC文件製作 左邊是舊版，右邊是新版 Image 2 - 1-2 TCP/IP應用層 定義應用程式所需的服務，如HTTP Image 3 - 1-3 TCP/IP傳輸層 代表作有TCP與UDP 目的是為上層提供服務 如TCP的錯誤修復 Image 4 - 1-4 透過增加SEQ碼來確認是否Lost封包 相鄰層互動指的是同一台電腦的上下層互動 同層互動指的是不同電腦，透過網路相同階層上的互動 TCP/IP網路層 負責IP定址&路由這類的工作 類似郵政服務 Image 5 - 1-5 TCP/IP鏈結層 根據特定媒介的協定，替封包加上LAN或WAN的標頭跟標尾 Image 6 - 1-6 TCP/IP實體層 指接頭 、腳位、電流量、編碼、光調變等 Image 7 - 1-7 TCP/IP模型 封裝是指鏈結層 資料段(segment)、封包(packet )、訊框(frame) Image 8 - 1-8 封包是添加東西最多、最肥的一層 OSI網路模型 應用層: 通訊軟體介面，如HTTP 表現層: 加密與資料格式，如ASCII & JPEG 會談層: 控制與結束對話 網際網路層vs網路層 Image 9 - 1-9-1 口訣All People Seem To Need Data Processing. (字首對應7-1層) 分層優點有不複雜、標準介面、易於學習、易於發展、廠商互通、工程模組化 Image 10 - 1-9-2 OSI的封裝術語為協定資料單元(PDU) Image 11 - 1-9-3 © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/5-CCNP/2-乙太區域網路基本觀念.html":{"url":"md/5-CCNP/2-乙太區域網路基本觀念.html","title":"乙太區域網路基本觀念","keywords":"","body":"乙太區域網路基本觀念 tagsstart CCNA Network Cisco 通訊 Protocol 證照 tagsstop 名詞定義 中文 英文簡稱 英文全稱 乙太網路 Ethernet 存取點 AP Access Point 無遮蔽雙絞線 UTP Unshielded Twisted-Pair 電磁干擾 EMI Electromagnetic Interface 串音 crosstalk 最大傳輸單元 MTU Maximum transmission unit 廣播位置 Broadcast address 群播位置 Multicast address 錯誤復原 error recovery 錯誤檢測 error detection 載波感應多重存取/碰撞偵測 CSMA/CD 乙太網路概述 LAN區域網路與WAN廣域網路不同 乙太網路使用乙太網路電纜，所以是指有線區域網路 乙太網路使用標準開頭IEEE 802.3 WLAN無線區域網路使用IEEE 802.11，並不屬於乙太網路 HUB、Switch、Router三者有別 AP類似Switch 乙太網路定義 乙太網路是指一系列實體層與鏈結層的標準。 每個乙太網路標準，是定義某特定電纜、某特定速度下的協定。 一般來說，電纜分為光纖電纜或是銅質電纜。 光纖電纜採用玻璃纖維。 銅質電纜採用無遮蔽雙絞線(UTP)。 乙太網路實體層標準種類 IEEE對乙太網路的簡稱: 速率+BASE+T(UTP) or X(光纖) Image 1 - 2-3-1 網路工程師選購設備，需知道此設備支援的乙太網路標準名稱 即便是不同類型，但只要是乙太網路，鏈結層標頭標尾都一樣 區網不同的線段，傳輸速率不一定一樣 Image 2 - 2-3-1 乙太網路實體層原理 節點用乙太網路埠上的電路系統連接一對芯線造成迴圈 Image 3 - 2-4-1 Image 4 - 2-4-2 發送端用相同編碼方式，隨時間推移，改變電氣訊號 接收端用相同編碼方式，隨時間推移，將電氣訊號翻譯回0或是1。 10M代表千萬分之一秒翻譯一個0或是1 實際上UTP電纜的芯線是互相扭絞，並非平行。這是為了抵銷電磁干擾(EMI) 兩條芯線內的EMI稱為串音(crosstalk) 乙太網路UTP電纜的兩端為RJ45接頭 & RJ45埠 10M & 100M是兩對芯線 1000M是四對芯線 每一對芯線有自己的顏色，如藍色與藍白色 RJ11接頭是北美電話線 GB乙太網路有專屬的Gigabit介面轉接器(GBIC)。有些還帶小型可插拔模組 SFP Image 5 - 2-4-3 乙太網路實體層接腳 目前為止，就像在自家開車，無須規則，但上路後需要遵守規則 一對芯線送，一對芯線收 Image 6 - 2-5-1 PC網路卡vs交換器，是採用平行腳腳位(因為收送端相反) 兩種類似的設備相連，採用交叉線腳位 Image 7 - 2-5-2 即便你接錯誤的電纜，仍然正常運作， 是因為Cisco交換器有auto-mdix的功能，改變錯誤的邏輯 1000M有四對芯線與更先進的設備，每一對可同時收送 1.2一對 3.6一對 4.5一對 7.8一對 Image 8 - 2-5-3 乙太網路資料鏈結層協定 乙太網路的優勢就是，這些協定的鏈結層都是標頭-資料-標尾 乙太網路實際上有數個標頭格式，圖中是最普遍的 Image 9 - 2-6-1 1500 bytes是IP MTU(最大傳輸單元) 媒體存取控制 MAC 是6 bytes 正常MAC傳遞，稱為單點傳播(Unicast)，相對於廣播(broadcast)和群播(muticast) Image 10 - 2-6-2 MAC碼的前三Bytes為製造商代碼，是製造商向IEEE申請3 bytes的組織唯一識別碼(OUI)當開頭 後3 bytes是製造商分配的唯一值，且不能是任何存在的OUI碼(為了獨一無二) Image 11 - 2-6-3 乙太網路中的MAC位置與廣播、群播的關係 MAC又被稱為實體位置、燒錄位置(BIA) 指MAC被燒錄在網路卡的ROM晶片中 廣播位置(Broadcast address)為FFFF.FFFF.FFFF，使乙太網路中的所有設備都被傳遞到 群播位置(Multicast address)有特定位置，在此特定位置中的乙太網路設備都被傳遞到 網路層協定有IPv4、IPv6、AppleTalk、DECnet、NetWare、SNA IEEE定義所有每一種網路層協定，在標頭代表一個Type的數值 FCS是用發送端對訊框做複雜數學運算後的值 接收端透過將FCS反運算來進行錯誤檢測(Error detection) 錯誤檢測(error detection)並不等同於錯誤復原(error recovery) 錯誤檢測後，凡是錯誤的訊框必須丟棄 TCP會要求再次發送，來復原遺失的資料 Hub與Switch的半雙工與全雙工 半雙工是一種概念，代表著不能同時發送or同時接收，用來防止碰撞，如Hub 全雙工則可以，如PC網卡、Switch Hub使用實體層標準，將電氣訊號洪泛(flooding)到所有其他的埠，屬於第一層設備 Hub沒有訊框、IP等概念 兩個設備同時輸入訊號，到同一台時，電氣訊號會碰撞，而成亂碼 為了避免這種狀況，所以Hub採用半雙工 Image 12 - 2-8 也就是A要傳送資料給Hub時， B就注意到Hub正在接收某處的訊框，不能傳給Hub 此演算法稱為CSMA/CD(載波感應多重存取/碰撞偵測) 但也可能因為兩個節點正好同一瞬間，檢查一個進來的訊框， 雙方都被判定沒有其他節點正在發送，於是發生碰撞 此時，發送端要監聽到碰撞是否發生，並送出人為的干擾信號， 告訴所有節點碰撞發生，大家各自挑一個隨機的時間再送一次 此演算法屬於碰撞偵測與復原 Switch屬於第二層設備，會檢查資料鏈路的標頭標尾 Switch會檢查MAC位置，如果碰撞，會將訊框放置佇列 © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/5-CCNP/3-廣域網路的原理.html":{"url":"md/5-CCNP/3-廣域網路的原理.html","title":"廣域網路的原理","keywords":"","body":"廣域網路的原理 tagsstart CCNA Network Cisco 通訊 Protocol 證照 tagsstop 名詞定義 中文 英文簡稱 英文全稱 服務供應商 SP Service Provider 用戶端設備 CPE Customer Premises Equipment 局端 CO Central Offices 用戶端設備 CPE Customer Premises Equipment 通道服務單元 CSU Channel Service Unit 資料服務單元 DSU Data Service Unit 資料終端設備 DTE Data Terminal Equipment 資料通訊設備 DCE Data communications Equipment 高階資料鏈結控制協定 HDLC High-Level Data Link Control 點對點通訊協定 PPP Point-to-Point Protocol 網路連接點 POP Point Of Presence 乙太網路仿真 Ethernet emulation 乙太網路多重協定標籤交換 EoMPLS Ethernet over MPLS 數位用戶電路 DSL Digital Subscriber Line 網際網路服務供應商 ISP Internet Service Providers 公眾交換電話網路 PSTN Public Switched Telephone Network DSL存取多工器 DSLAM DSL Access Multiplexer WAN的簡介 WAN和LAN都符合OSI的第一、第二層標準 WAN的安裝需要穿過他人房產，而我們無權這麼做 故此由電信公司建構後出租 WAN分為專線與光纖乙太網路標準之長距離電纜 專線WAN 專線一詞，指的是使用專線的公司本身並不擁有這條線路 是服務供應商(SP)出租提供 專線完全為客戶著想，是高品質及客戶私有的 美國專線上的標準速度為256Kbps 缺點是成本較高 & 較長的等待佈線時間 圖中彎曲線路，視同省略細節 Image 1 - 3-2-1 專線的實體細節 專線服務是使用全雙工的邏輯，在預定速度傳遞 實際上，使用了兩對纜線，兩個方向個使用一對，概念上是全雙工 Image 2 - 3-2-2 T1是專線的一種特殊類型， 傳送速率每秒1.544Mbps 專線的佈線 專線的佈線，是將它們的設備設置在稱為局端(CO)的建築物內 Image 3 - 3-2-3 期望有一天能租給建築物內的人們 每個地點都會有用戶端設備(CPE) 所謂CPE包含路由器、序列介面卡、CSU/DSU Image 4 - 3-2-4 序列介面卡有點像乙太網卡，裝在路由器內 序列介面卡無法直接連接到電信公司的四芯電纜(通常是RJ-48接頭，與RJ-45接頭大小外型一樣) 序列介面卡需先透過短序列纜線接到稱為CSU/DSU的功能上，再透過CSU/DSU去接到電信公司的四芯電纜 短序列纜線一端是序列介面卡接頭，一端是CSU/DSU接頭 CSU/DSU可以被整合到序列介面卡內，也可以脫離路由器，成為外部設備 用戶只能從電信公司提供的速率清單中擇一，不能任意指定速率 短序列纜線有兩條，在路由器A & CSU/DSU之間一條，另一條在路由器B & CSU/DSU之間，兩條分別有不同的名稱 短序列纜線有公接頭的叫DTE，是平行線 短序列纜線有母接頭的叫DCE，是交叉線 一端是DTE，另一端就是DCE 兩條可以直接相接 最後，為了使線路正常，DCE接的那邊，需要有一個通常是由CSU/DSU提供的功能，稱為時脈 時脈是用來告訴路由器，何時發送一個位元，進而轉成電氣訊號 時脈也可以由路由器的序列介面提供，需要透過設定clock rate命令 Image 5 - 3-2-5 專線的資料鏈路細節 以上算是講實體層，現在來談資料鏈路層 最常見於此的協定有HDLC與PPP 對於點對點的專線來說，HDLC的位置欄位並無作用 HDLC的位置欄位是由於電信公司發展了多點電路，因此可能有超過一個以上的目的地 HDLC類似乙太網路的其他欄位 Image 6 - 3-2-6 HDLC是ISO的標準，同OSI組織，而HDLC卻沒有Type欄位(辨別此封包是IPv4 or IPv6) 於是Cisco路由器使用Cisco專屬的HDLC，自行添加了Type欄位 Image 7 - 3-2-7 下圖為TCP/IP的網路層的視角(相當無感LAN與WAN) Image 8 - 3-2-8 下圖為資料鏈結層的視角(需要正確的封裝/解封裝) Image 9 - 3-2-9 乙太網路做為WAN 1000BASE-LX標準的單模光纖電纜(可支援5KM) 1000BASE-ZX標準(可支援70KM) 乙太網路離開你家以後，連接到SP附近一些網路連接點(POP) 乙太網路WAN的服務有兩個名稱，乙太網路仿真 & 乙太網路多重協定標籤交換(EoMPLS) EoMPLS是一種能夠備用在SP內部雲的技術 提供兩個客戶設備之間的點對點連線 於資料鏈結層來看，圖中第二步驟解封裝後，依然會捨棄標頭標尾 Image 10 - 3-3 新加上的標頭標尾，其位置改為R1 to R2 存取Internet Internet是一個大型的WAN Internet核心由網際網路服務供應商(ISP)營運 ISP彼此互相合作建立網狀 Image 11 - 3-4-1 每一條鏈路稱為Internet存取鏈路 企業傾向用專線連WAN 家庭常用的DSL已經安裝在家庭的類比電話線路，cable則使用CCTV電纜 Image 12 - 3-4-2 數位用戶電路(DSL) DSL只提供務住宅到電信公司網路這段的實體電路 一般電話線透過RJ-11接頭(比RJ-45瘦小)，從電信商CO連到家庭的護牆版 透過電信交換機的一個連接埠，轉送到公眾交換電話網路(PSTN) Image 13 - 3-4-3 家中需要添增DSL數據機連接到一個空電話插座 電信公司CO需要添增DSL存取多工器(DSLAM)，將語音和路由器資料分離 Image 14 - 3-4-4 DSL支援不對稱的速度。(下載快，上傳慢) 有線電視網路 同DSL，支援不對稱的速度 有線電視公司需要將資料和視訊分開 Image 15 - 3-4-5 通常Cable比較快，但DSL比較便宜 兩者都提供Always on的服務，使連線無須採取某些行動 © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/5-CCNP/4-IPv4定址及路由的基本原理.html":{"url":"md/5-CCNP/4-IPv4定址及路由的基本原理.html","title":"IPv4定址及路由的基本原理","keywords":"","body":"IPv4定址及路由的基本原理 tagsstart CCNA Network Cisco 通訊 Protocol 證照 tagsstop 名詞定義 中文 英文簡稱 英文全稱 路徑選擇 Path Selection 預設閘道 Default gateway or Default router 位置解析協定 ARP Address Resolution Protocol 網域名稱系統 DNS Domain Name System Ping Packet Internet Groper 網際網路控制訊息協定 ICMP Internet Control Message Protocol 網路層功能概述 IP定址：就像是郵遞區號的命名規則。 IP路由：轉送IP封包的過程，就像是郵差透過IP定址送到目的地。 IP遶送通訊協定：一個告訴一個當方式，來動態學習IP位址。 遶送的開始 路由就是路徑選擇的過程。 發送端將發現目的地IP與自己不在同一個LAN上。 於是將IP封包送至預設閘道(Default gateway or Default router)。 鏈結層遶送 每一台router都會有它的IP路由表。 IP路由表就像是高速公路上的路標，LAN或WAN線路相當於道路。 IP路由表中，紀錄如何到達每個IP網路，或IP子網路的路徑。 網路層表明遶送的過程，各router必須適當的封裝與解封裝。 為了封裝新的標頭標尾，需要透過位置解析協定(ARP)來決定標頭內所使用的MAC位置。 ARP會動態學習LAN中Host IP對應的MAC，如圖中R3發給PC2前，透過ARP取得PC2的MAC。 IP定址與IP遶送 IP就像是郵政區號，一層一層定下來。 除了來源IP位置、目的地IP位置以外，還有12 bytes的各項標頭，組成了共20 bytes的IPv4標頭。 Image 1 - 4-1 遶送通訊協定的方式，是Host端開始發送封包到Gateway，Gateway再發給下一位router。 此時下一位router便知道，透過某Gateway，可以到達某個IP子網路。 Gateway發送給下一位router的決定方式，也是透過遶送通訊協定得知的。 IPv4定址 根據IP數字開頭，分為A、B、C、D、E級。 ABC為一般單點傳播用，D為群播(multicast)位置、E為實驗位置。 Image 2 - 4-2-1 A級每個子網路有$2^{24}$個主機。 B級每個子網路有$2^{16}$個主機。 C級每個子網路有$2^{8}$個主機。 Image 3 - 4-2-2 Image 4 - 4-2-3 子網路切割是自行再將某一級網域進行細部切割。 A,B,C網域，除了開頭以外，其餘部分全0與全1(廣播位置)都不能使用。 IPv4路由 目的地如果是同一區網，則直接傳送，否則則交給預設閘道處理。 Image 5 - 4-3-1 預設閘道會先複製封包、檢查FCS，若有錯誤則丟棄封包。 確定沒有錯誤，則丟棄訊框標頭，再查表來分析路徑、封裝、傳送。 下圖使用OSPF遶送通訊協定，一層一層查找。 Image 6 - 4-3-2 IPv4遶送 動態學習，將每個子網路路徑加入路由表。 若到某個子網路有超過一條路徑，則將最佳路徑加入。 路徑失效則刪除。 若有新路徑可以取代失效的路徑，則加入。 取代速度要快，期間稱為收斂時間。 防止迴路。 Image 7 - 4-4 遶送通訊協定有很多種，但有共通點。 直連的子網路，加入路由表。 每一台都互相告訴鄰居自己的路由表(路徑更新)。 其他網路層功能 DNS DNS查詢的名稱也是世界通用協定。 並非某一台DNS知道全部名稱，而是由全世界的DNS互相學習、合作查詢。 Image 8 - 4-5-1 ARP 雖然知道IP的路徑，卻不知道下一位的MAC。 於是ARP用來動態學習LAN中另一台的MAC。 定義ARP Request與ARP Reply：如果這是你的IP，請回應我你的MAC位置。 Image 9 - 4-5-2 將結果記錄到ARP快取或ARP表中，逾期則清除。 透過arp -a來觀察。 Ping Ping使用ICMP協定，發送ICMP echo request到另一個IP。 若有收到，則回應ICMP echo reply。 僅用來測試，代表路徑通行。 Image 10 - 4-5-3 ICMP不依賴任何應用程式，只用了OSI第1、2、3層。 ICMP具有更多功能。 © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/5-CCNP/5-TCP_IP傳輸層和應用層的基本原理.1.html":{"url":"md/5-CCNP/5-TCP_IP傳輸層和應用層的基本原理.1.html","title":"TCP_IP傳輸層和應用層的基本原理.1","keywords":"","body":"TCP/IP傳輸層和應用層的基本原理 tagsstart CCNA Network Cisco 通訊 Protocol 證照 tagsstop 名詞定義 中文 英文簡稱 英文全稱 網路電話 VoIP Voice over IP 網路視訊 Video over IP 全球資訊網 WWW World Wide Web 專門管理網路設備的軟體使用 DNS Domain Name System 小型檔案傳輸協定 TFTP Trivial File Transfer Protocol 檔案傳輸協定 FTP File Transfer Protocol 簡單郵件傳輸通訊協定 SMTP Simple Mail Transfer Protocol 郵件通訊協定版本 POP3 Post Office Protocol version 3 動態埠號 dynamic port numbers 網路檔案系統 NFS Network File System 唯一資源定位器 URL Unifrom Resource Locator 傳輸層目標與功能要求 UDP只支援下表的第一項，TCP則支援全部。 Image 1 - 5-1-1 提供服務給應用程式。 TCP標頭如下。 Image 2 - 5-1-2 UDP的標頭如下。 Image 3 - 5-1-3 為了區別封包要餵給哪個應用程式，所以TCP/UDP都用了埠號。 Image 4 - 5-1-4 多工使用了通訊端(Socket)的概念。 Socket包含三個方面： IP 位置 傳輸通訊協定 埠號 埠號1024以下，是保留給公認應用程式使用。 埠號1024開始，稱為動態埠號(dynamic port numbers)。 一般公認的埠號都使用在伺服器上，其他埠號則使用在用戶端上。 Image 5 - 5-1-5 常見的TCP/IP應用程式有： WWW：網頁伺服器。 DNS：查詢名稱對應的IP。 SNMP：專門管理網路設備的軟體使用。 TFTP：小型檔案傳輸協定。 FTP：檔案傳輸協定。 SMTP：簡單郵件傳輸通訊協定。 POP3：郵件通訊協定版本。 常見的UDP應用程式有： 網路電話(VoIP*)& 網路視訊。 DNS的請求。 網路檔案系統(NFS)：使用應用層的復原。 三向交握使用了SYN flag & ACK flag & FIN flag。 大體來說，傳輸層通訊協定分為連接導向 & 非連接導向兩大類，用以表明是否交換資料前是否要先建立關係。 TCP/IP應用層 應用程式大略分三類型的服務品質(QoS)需求：批次處理、互動式、即時性。 QoS包含四個特徵 頻寬：每秒傳輸的位元量。 延遲：IP傳輸所需時間。 抖動：延遲產生的變動量。 耗損：到達前被丟棄的百分比。 Image 6 - 5-2 批次處理比較在意頻寬。 © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"md/5-CCNP/6-使用交換器建置乙太區域網路.html":{"url":"md/5-CCNP/6-使用交換器建置乙太區域網路.html","title":"使用交換器建置乙太區域網路","keywords":"","body":"CCNA - 6. 使用交換器建置乙太區域網路 tagsstart CCNA Network Cisco 通訊 Protocol 證照 tagsstop 名詞定義 中文 英文簡稱 英文全稱 碰撞領域 CD 內容定址記憶體or交換表 CAM Content Addressable Memory 泛洪 Flooding 擴展樹協定 STP 雙工不符 Duplex Mismatch Hub、橋接器、Switch Hub Hub會產生碰撞問題。 Image 1 - 6-1-1 Hub造成的半雙工+CSMA/CD的防碰撞原理，造成頻寬共用，且越多設備加入，碰撞機率越高。 橋接器 橋接器將網路切割成碰撞領域(CD)。 Image 2 - 6-1-2 橋接器將訊框留在一個Buffer中，直到確定目標CD空閒才送出。 橋接器將每個CD切割，使每個CD有自己的全部頻寬。 Switch Switch將每條線路視為單一CD。 Image 3 - 6-1-3 Switch支援速度協商，也就是不同乙太網路速度皆可透過Switch溝通(Hub無法)。 Switch收到訊框後，做以下三動作： 根據目的MAC位置，如果是廣播、群播or未知目的的單點傳播，則泛洪(flooding)出去。 若目的MAC位置與來源介面不同，則轉送，否則過濾掉(不轉送) 根據來源MAC位置，紀錄到自己的交換表中，並將閒置計時器設為0。 為了避免泛洪造成的第2層迴圈，所有Switch一同利用擴展樹協定(STP)，決定每個介面是否封鎖or轉送。 Image 4 - 6-1-4 泛洪：除了來源地以外，其他全部送一份訊框。同broadcast的意思。 閒置計時器：表中每一個項目都有一個count，起始值是0。 隨時間增加，計算這位客人多久沒有來消費了。 當表格滿出來的時候，將最久沒來的項目刪除。 封鎖：指介面不能轉送或收到訊框。適當封鎖介面可以使LAN區段僅存一條有效路徑。 Image 5 - 6-1-5 Switch內部有三種轉送的方式。由於現在鏈路速度夠快，因此採用第一種居多。 Image 6 - 6-1-6 乙太區網設計選擇 碰撞領域 網路介面卡(NIC)的集合。 其中一個NIC發送的訊框會與相同碰撞領域內的任一個其他NIC訊框發生碰撞。 Image 7 - 6-2-1 設備共用頻寬。 Hub造成100Mbps的鏈路，同一時間只有一台PC可以傳輸資料，因此LAN最大頻寬共100Mbps。 Switch使每一條線路自成一個碰撞領域，加上全雙工，使整體LAN的頻寬拉至100＊PC數量＊2 Mbps。 廣播領域 網路介面卡(NIC)的集合。 相同廣播領域內的其他NIC會收到一個NIC所發送的廣播訊框。 路由器不負則轉送乙太廣播訊框(忽略)，因此只有路由器會切割LAN的廣播領域。 交換器與橋接器都會泛洪廣播訊框。 Image 8 - 6-2-2 任一台廣播，會造成其他n-1台必須中斷CPU來處理廣播訊框。 因此，廣播領域不宜過大(n)。 何時使用hub & switch建置乙太網路是容易的。 何時使用router切割乙太網路的廣播領域是不容易的。 Image 9 - 6-2-3 VLAN LAN：由相同廣播領域內的設備所組成的。 Image 10 - 6-2-4 設定交換器，將不同介面的LAN，切割成不同的廣播領域(VLAN)。 Image 11 - 6-2-5 園區網路 存取層：直接存取host端，正常任兩台存取層Switch不互相轉送。 分送層：轉送存取層的訊框，每個存取層Switch至少使用1條上行鏈路(uplink)接到分送層。 核心層：大型園區網路用，提供非常高轉送速度，轉送分送層訊框。 Image 12 - 6-2-6 UTP支援100公尺，而雷射(數千公尺)或LED的光纖更遠。 光纖纜線的類型有分，便宜但短的多模&昂貴較遠的單模。 Image 13 - 6-2-7 自動協商 原本，鏈路兩端必須使用相同標準。 因此萬一新設備，不吃舊線路，則必須更新很多(Switch & Switch連接到的host)。 因此，IEEE 802.3u定義了自動協商，要求每個節點告知自己吃的協定清單。 每個節點選出最快速且最佳的雙工設定。 可以關閉自動協商，但最好兩端一起關或一起開。 一邊關，一邊開，則Cisco交換器會感應速度，且根據IEEE的預設值，速度10 or 100則半雙工，否則全雙工。 一般交換器會採用最慢速度(10Mbps)。 下圖F0/1顯示最壞結果：雙工不符(duplex mismatch)。 Image 14 - 6-2-8 PC1使用全雙工，但F0/1使用CSMA/CD+半雙工，收到訊框判定有機會碰撞，但實際上沒有，於是等待一段時間，重新傳送訊框。 鏈路有在運作，但效能不彰。 Hub不懂協商，所以採用IEEE的預設值(10Mbps&半雙工)。 Image 15 - 6-2-9 © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 "},"tags.html":{"url":"tags.html","title":"Tags","keywords":"","body":"Tags © 2017 Trashman all right reserved，powered by Gitbook修訂時間： 2024-10-14 00:30:16 CCNA Cisco區域網路交換器 TCP_IP與OSI網路模型 乙太區域網路基本觀念 廣域網路的原理 IPv4定址及路由的基本原理 TCP_IP傳輸層和應用層的基本原理.1 使用交換器建置乙太區域網路 Network Cisco區域網路交換器 TCP_IP與OSI網路模型 乙太區域網路基本觀念 廣域網路的原理 IPv4定址及路由的基本原理 TCP_IP傳輸層和應用層的基本原理.1 使用交換器建置乙太區域網路 Cisco Cisco區域網路交換器 TCP_IP與OSI網路模型 乙太區域網路基本觀念 廣域網路的原理 IPv4定址及路由的基本原理 TCP_IP傳輸層和應用層的基本原理.1 使用交換器建置乙太區域網路 通訊 Cisco區域網路交換器 TCP_IP與OSI網路模型 乙太區域網路基本觀念 廣域網路的原理 IPv4定址及路由的基本原理 TCP_IP傳輸層和應用層的基本原理.1 使用交換器建置乙太區域網路 Protocol Cisco區域網路交換器 RTP體系 TCP_IP與OSI網路模型 乙太區域網路基本觀念 廣域網路的原理 IPv4定址及路由的基本原理 TCP_IP傳輸層和應用層的基本原理.1 使用交換器建置乙太區域網路 證照 Cisco區域網路交換器 TCP_IP與OSI網路模型 乙太區域網路基本觀念 廣域網路的原理 IPv4定址及路由的基本原理 TCP_IP傳輸層和應用層的基本原理.1 使用交換器建置乙太區域網路 Server Server 軟體 Server RTP RTP體系 RTCP RTP體系 RTSP RTP體系 "}}